FROM node:8.11-alpine

ARG AWS_ACCESS_KEY
ARG AWS_SECRET_KEY
ARG AWS_USER_BUCKET_NAME
ARG AWS_REGION
ARG ENV

ENV DEVOPS_TEST_BACKEND_AWS_USER_BUCKET_NAME=${AWS_USER_BUCKET_NAME} \
    DEVOPS_TEST_BACKEND_AWS_REGION=${AWS_USER_BUCKET_NAME} \
    DEVOPS_TEST_ENV=${ENV} \
    DEVOPS_TEST_BACKEND_AWS_ACCESS_KEY=${AWS_ACCESS_KEY} \
    DEVOPS_TEST_BACKEND_AWS_SECRET_KEY=${AWS_SECRET_KEY} 

WORKDIR /app

COPY package.json .

RUN npm install

COPY . ./app

EXPOSE 3081

CMD ["npm", "run", "start"]


